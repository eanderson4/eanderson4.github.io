<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>MISO</title>
    <link rel="stylesheet" href="css/style.css" media="screen" type="text/css" />

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
  </script>
<script type="text/javascript"
	  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>


  </head>
  <body>
    <div id="title">Midwest Independent System Operator (MISO)</div>
I wante stufff
when $a \ne 0$, there are many solutions to \(ax^2 + bx + c = 0\), or actually just two, which are $$x = {-b \pm \sqrt{b^2-4ac} \over 2a}.$$

<div id="tooltip" class="hidden">
  <p><strong><span id="name">Important Label Heading</span></strong></p>
  <p><span id="ex">100</span></p>
  <p><span id="var">100</span></p>
  <p><span id="min">100</span></p>
  <p><span id="max">100</span></p>
  <p><span id="dif">100</span></p>
  <p><span id="neg">100</span></p>
</div>
<br/>

<center><b>Node Explorer</b></center>
<div id="nodegraph"></div>


    <script type="text/javascript" src="js/d3.v3.js"></script>    
    <script type="text/javascript">
      var dataset=[];
      d3.csv("data/node.txt",function(error, data) {

      if (error) { 
       console.log(error);
      }
      else {
      dataset = data;
      generateVis();
      }

      });
      

      function generateVis() {
 
      var width = 760,
      height = 400,
      padding=20;
      

      var x = d3.scale.linear()
          .domain([0, d3.max(dataset,function(d){ return parseFloat(d.ID); })])
          .range([padding, width]);

      var y = d3.scale.linear()
          .domain([0, d3.max(dataset,function(d){return parseFloat(d.Min);})])
          .range([height, 0]);

      var r = d3.scale.linear()
          .domain([d3.min(dataset,function(d){return parseFloat(d.Var);}), d3.max(dataset,function(d){return parseFloat(d.Var);})])
          .range([1, 5]);

      var svg = d3.select("#nodegraph").append("svg")
          .attr("width", width)
          .attr("height", height)
        .append("g")
          .call(d3.behavior.zoom().x(x).y(y).on("zoom", zoom ));

      svg.append("rect")
          .attr("class", "overlay")
          .attr("width", width)
          .attr("height", height);

      var circle = svg.selectAll("circle")
          .data(dataset)
        .enter().append("circle")
          .attr("r", function(d){ return r(parseFloat(d.Var)); })
          .attr("transform", transform)
      .on("mouseover", function(d){
      d3.select(this).attr("fill","orange");

      
      //Update the tooltip position and value
      var tooltip = d3.select("#tooltip");
      tooltip
        .style("left", x(d.ID) + "px")
        .style("top", event.clientY+.75*padding + "px")
        .select("#name")
        .text(d.Name);
      
      tooltip.select("#ex")
        .text("Ex: "+parseFloat(d.Ex).toFixed(2));
      tooltip.select("#var")
        .text("Var: "+parseFloat(d.Var).toFixed(2));
      tooltip.select("#min")
        .text("Min: "+parseFloat(d.Min).toFixed(2));
      tooltip.select("#max")
        .text("Max: "+parseFloat(d.Max).toFixed(2));
      tooltip.select("#dif")
        .text("Dif: "+parseFloat(d.Dif).toFixed(2));
      tooltip.select("#neg")
        .text("Neg: "+parseFloat(d.Neg).toFixed(2));

      //Show the tooltip
      d3.select("#tooltip").classed("hidden", false);
      })
      .on("mouseout", function(d){
      d3.select(this)
      .transition()
      .duration(250)
      .attr("fill","blue");
      
      //Hide the tooltip
      d3.select("#tooltip").classed("hidden", true);
      });


      var xAxis = d3.svg.axis().scale(x).orient("bottom");
      svg.append("g")
      .attr("class","xaxis")
      .attr("transform", "translate(0,"+(height-padding) + ")")
      .call(xAxis);
      var yAxis = d3.svg.axis().scale(y).orient("left");
      svg.append("g")
      .attr("class","yaxis")
      .attr("transform", "translate("+padding+",0)")
      .call(yAxis);

      function zoom(scale,translate) {
      circle.attr("transform", transform);
      svg.select("g.xaxis").call(xAxis);
      svg.select("g.yaxis").call(yAxis);
      }

      function transform(d) {
        return "translate(" + x(d.ID) + "," + y(d.Min) + ")";
      }
      



      }
      

    </script>



    
<table class="pages">
  <tr>
    <td class="linktitle" colspan="4" ><b>Pages<b></td>
  </tr>
  <tr>
    <td>
      <a href="miso.html"><b>Midwest Independent System Operator<b></a>
    <td>
      <a href="mge.html">Madison Gas and Electric Loadzone</a>
    </td>
    <td>
      <a href="kewaunee.html">Kewaunee Nuclear Power Plant</a>
    </td>
    <td>
      <a href="ref.html">References</a>
    </td>
  </tr>
</table>

  </body>
</html>
